/*! jqu See README.md */
var jQueue=function(a,b,c){var d=this,e=[],f=0,g=null,h=9999999999,i=null,j="function"==typeof a?a:function(){},k="Last"==b||"Block"==b||"Flush"==b||"Append"==b||"Loop"==b||"number"==typeof b&&b%1==0?b:"Append",l=c?parseInt(c,10):300,m=function(){return null!==i?!0:(i=setInterval(function(){if(e.length<=0){if(null!==g&&!g.ICC())return;return r(),clearInterval(i),void(i=null)}var a=e.shift();if(!a.E){var b=j.apply(d,a.P);a.Cb.R(b),b?a.Cb.D(b):a.Cb.F(b),"Forever"!=a.L&&--a.L<=0||e.push(a)}},l),!0)},n=function(a){var b=this,c=a,d=function(){for(var a in e)if(e[a].ID==c)return a;return-1},f=function(a,b){return"function"!=typeof b?!1:-1==(p=d())?!1:(e[p].Cb[a]=b,!0)};return b.result=function(a){return f("R",a),b},b.done=function(a){return f("D",a),b},b.fail=function(a){return f("F",a),b},b.callback=function(a){return f("C",a),b},b.expired=function(a){return f("E",a),b},!0},o=function(a){var b=this,c="function"!=typeof a?function(){return a}:a;b["export"]=function(){return c}},q=function(a,b,c,e){return function(){if(b.IC[a]=!0,!b.E){var f=c.apply(d,arguments);e(f)}}},r=function(){null!==g&&(g.E||(g.E=!0,g.Cb.E()),g=null)};return d.reset=function(){r(),null!==i&&(clearInterval(i),i=null),e=[]},d.cb=d.callback=function(a){return new o(a)},d.run=function(){var a=!1,b=function(){return!0},c={ID:f++%h,E:!1,P:arguments,IC:{},ICC:function(){for(var a in this.IC)if(!this.IC[a])return!1;return!0},L:1,Cb:{D:function(){},F:function(){},R:function(){},C:function(){},E:function(){}}};switch(k){case"Block":b=function(){if(a){if(null!==g)return!1}else if(null===i)return!0;return!0};case"Last":for(var d in c.P)"object"==typeof c.P[d]&&c.P[d]instanceof o&&(c.P[d]=q(d,c,c.P[d]["export"](),function(a){c.Cb.C(d,a)}),c.IC[d]=!1,a=!0);case"Flush":if(!b())return new n(-1);null!==i&&(clearInterval(i),i=null),e=[];break;case"Append":break;case"Loop":c.L="Forever";break;default:"number"==typeof k&&k%1==0&&(c.L=parseInt(k,10))}return a&&r(),g=c,e.push(c),m(),new n(c.ID)},!0};